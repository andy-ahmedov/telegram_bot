<p align="center"><h>TELEGRAM BOT</h></p>

Алгоритм работы телеграм-бота включает следующие этапы:

1. Контейнеризация: Телеграм-бот реализован в контейнерной среде с использованием Docker. Система состоит из двух контейнеров - первый содержит код бота, второй - базу данных PostgreSQL.

2. Связь через docker-compose: Взаимодействие между контейнерами обеспечивается через файл docker-compose.yml. Этот файл также определяет папки для хранения данных базы данных. При перезагрузке контейнера с PostgreSQL данные сохраняются.

3. Общая папка для файлов: На хост-системе создана общая папка "shared_files", связанная с контейнером бота. В этой папке отслеживаются два файла: "catalog.pdf" для отправки пользователям при запросе каталога и XML-файл выгрузки данных о клиентах из системы 1С.

4. Конвертация XML в PostgreSQL: При запуске бота, XML-файл конвертируется в таблицу "client_repository" в базе данных PostgreSQL, после чего файл удаляется. Эта таблица содержит информацию о клиентах, такую как ФИО, номер телефона и бонусы.

5. Обновление базы данных: Для обновления базы данных клиентов, достаточно поместить новый XML-файл в папку "shared_files". Бот создаст новую таблицу "client_repository_new" на основе этого файла, после чего его удалит.  Пока происходит конвертация, пользователи работают с предыдущей версией таблицы.

6. Переименование таблиц: После завершения конвертации, происходит переименование таблиц. Старая таблица переименовывается добавлением постфикса "_old", а новая таблица становится "client_repository". Этот процесс занимает минимальное время.

7. Аутентификация и верификация: Таблица "client_repository" играет роль аутентификации для новых пользователей. Если номер клиента присутствует в таблице, пользователь проходит верификацию и получает доступ к функциям бота.

8. Функции бота: Помимо аутентификации, бот предоставляет пользователю информацию о скидках, акциях компании и другие команды, такие как получение контактов, адресов магазинов и каталога товаров.

Алгоритм обеспечивает эффективное взаимодействие бота с базой данных, позволяя обновлять информацию о клиентах и предоставлять пользователям актуальные данные о компании. Важно отметить, что переименование таблиц происходит практически мгновенно, минимизируя перерыв в обслуживании пользователей.
